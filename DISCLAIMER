IMPORTANT INSTRUCTIONS:


To run, first pull the image and run the container with the following command:


'docker run --restart=always -dp 2222:2222 --name dockerjail lphl/dockerjail:latest'


Then, exec into the container with the following command:


'docker exec -it dockerjail sh'


Once inside the container, run the following command:


'/home/alpine/regenerate_keys.sh'


This is to ensure that you you are not an idiot running the same SSH host keys

and SSH private key as everyone else who pulls this same image.


Exit out of the container with 'Ctrl-P+Q' and copy the private key file to the host using

the following command:


'docker cp dockerjail:/home/alpine/.ssh/id_rsa dockerjail.pem'


Then 'chmod 400 dockerjail.pem', and you are good to go.

You can then use 'ssh -i dockerjail.pem -p 2222 alpine@localhost' to SSH into the container.


If you are just needing a non-root sshd container, then this should be adequate for your purposes.

However, without the iptables implementation on the host, this is mainly just a somewhat-secure container

running sshd as a non-root user, and it will still have access to your entire local network,

albeit with limited capabilities of the alpine user, but SSH is available.


For this reason, I would urge you to clone the GitHub repo from https://github.com/phx/dockerjail.git

and build the container yourself by running the install.sh script, which is a bit more intrusive,

but takes the extra steps to lock down the container to ONLY the host via iptables in order to

make this implementation as secure as possible.


